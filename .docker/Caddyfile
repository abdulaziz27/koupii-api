{
  admin off
  auto_https off
}

# Health check endpoint
:80/health {
  respond "OK" 200
}

# Main application
:80 {
  root * /app/public

  php_server {
    # Enable worker mode with request limits to prevent memory leaks
    # worker_max_requests 5000
  }

  # Enable compression
  encode zstd br gzip

  # Logging
  log {
    output file /app/storage/logs/frankenphp.access.log
    format json
  }
}
